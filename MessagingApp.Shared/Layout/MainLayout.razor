@inherits LayoutComponentBase
@inject NavigationManager NavigationManager

<MudThemeProvider />
<MudDialogProvider />
<MudSnackbarProvider />

<MudLayout>
    <MudAppBar Elevation="1">
        <MudIconButton 
            Icon="@Icons.Material.Filled.Contacts" 
            Color="Color.Inherit" 
            Edge="Edge.Start" 
            OnClick="NavigateToContacts" />
        <MudSpacer />
        <MudText Typo="Typo.h6">Nexus Secure Messenger</MudText>
        <MudSpacer />
        <MudIconButton
            Icon="@Icons.Material.Filled.Logout"
            Color="Color.Inherit"
            OnClick="Logout" />
    </MudAppBar>

    <MudDrawerContainer>
        <MudMainContent Class="pt-16 px-4">
            <MudContainer MaxWidth="MaxWidth.False">
                @Body
            </MudContainer>
        </MudMainContent>
    </MudDrawerContainer>
</MudLayout>

@code {
    void NavigateToContacts() =>
        NavigationManager.NavigateTo("/contacts");

    Task Logout()
    {
        NavigationManager.NavigateTo("/login", forceLoad: true);
        return Task.CompletedTask;
    }
}
